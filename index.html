<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=1024, user-scalable=no">

	<title>The PiCL Design Review</title>

	<!-- Required stylesheet -->
	<link rel="stylesheet" href="core/deck.core.css">

	<!-- Extension CSS files go here. Remove or add as needed. -->
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="extensions/scale/deck.scale.css">

	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<link rel="stylesheet" href="themes/style/sandstone.persona.css">
	<link rel="stylesheet" href="./slides.css">

	<!-- Required Modernizr file -->
	<script src="modernizr.custom.js"></script>
</head>
<body class="deck-container">

<!-- Begin slides. Just make elements with a class of slide. -->

<!-- INTRODUCTION -->

<section class="slide s-notfx">
<div>
<span>"Fixing Sync". <em>Really</em>.</span><br>
The PiCL design review - July 26th 2013
</div>
</section>

<section class="slide">
## Agenda
<ol>
<li> What are we building? </li>
<li> How will we build it? </li>
<li> What do we know today? </li>
<li> What's next? </li>
</ol>
</section>

<section class="slide">
# What are we building?
</section>

<section class="slide">
## Key Goals
<ul>
<li> <em>Usability</em>: email and password
<li> <em>Stability</em>: Doesn't suck
<li> <em>Time To Market</em>
<li> <em>Future Features</em>: Are Possible.
</ul>
</section>

<section class="slide">
## MVP Definition
<ul>
<li> Email / Password based setup
<li> Passwords, Tabs, Bookmarks and History
<li> Migration of existing sync users (!)
<li> Sync is durable and frequent
</ul>
<br><br>
https://wiki.mozilla.org/User:Dria/Firefox_Sync_User_Stories_-_July_2013
</section>

<section class="slide">
## Design Constraints
<br><center><i>(whereby we plan for the future without slowing down.)</i></center><br>
<ul>
<li> One Password For Firefox
<li> Easy to add new data types
<li> Parallelize
<li> Win on Privacy <em>and</em> Usability
</ul>
</section>

<section class="slide">
## Feel it Like A Human Would
# <a href="http://idp-mocks.lcip.org/">Grab your Pahcorns!</a>
</section>

<section class="slide">
## Architecture
</section>

<section class="slide">
# Fixing sync by giving you access to your data.
</section>

<section class="slide">
# How will we build this?
</section>

<section class="slide">
## Responsibility
# Who owns what? (diagram)
</section>

<section class="slide">
## Responsibility
# Who owns what? (diagram)
</section>

<section class="slide">
# Without clear ownership we will fail.
</section>

<section class="slide">
## The contracts
<ol>
<li> Authentication API
<li> Storage Protocol - wire + representation
<li> User Experience
</ol>
</section>

<section class="slide">
## Key Dates
<ol>
<li> Sept 2nd - storage decision
<li> Sept 30th - Sign in implemented
<li> ...
</ol>
</section>

<section class="slide">
# Focus. Parallelization. Contracts. Communication.
</section>

<section class="slide">
# Firefox accounts
</section>

<section class="slide">
## Requirements
<ol>
<li> Works everywhere, mobile, desktop, web
<li> Our products have full control over UX
<li> Cryptographic keys derived from user's password
<li> No Federated sign in.  User Choice and Privacy At Odds.
</ol>
</section>

<section class="slide">
## Deployment Diagram
High level deployment diagram of authenticaiton
</section>

<section class="slide">
## Deriving Keys
<br><center><i>(Security is only as good as the password and the handling)</i></center><br>
<ol>
  <li> User types in a password
  <li> PBKDF2 stretching (device)
  <li> SCRYPT (device or helper)
  <li> PBKDF2 stretching (device)
  <li> auth and crypt keys result
</ol>
</section>

<section class="slide">
## Signing In From Content
<br><center><i>(whereby we leverage the work we've done the last couple years)</i></center><br>
<ol>
  <li> We build a bridge!
  <li> Websites don't touch raw passwords
  <li> Potential FirefoxOS Benefits
</ol>
</section>

<section class="slide">
## Access PiCL data from the web
</section>

<section class="slide">
## FA: Current State
<ol>
  <li> <a href="https://github.com/mozilla/picl-idp/blob/master/docs/api.md">API Documentation</a>
  <li> running server: http://idp.profileinthecloud.net/
  <li> <a href="https://github.com/dannycoates/picl-idp/blob/a1408cb84579639bf2ccbd43f228e2e9c6c45d36/client/index.js">reference code</a>
  <li> <a href="https://wiki.mozilla.org/Identity/AttachedServices/KeyServerProtocol">gory details</a>
</ol>
</section>

<section class="slide">
# Storage
</section>

<section class="slide">
## MVP requirements
<ol>
  <li> Scales
  <li> Supports Bookmarks, Tabs, Passwords, and History
  <li> Durable / Server Canonical
  <li> Fast To Market
  <li> Compatible with 3rd party integration
</ol>
</section>

<section class="slide">
## High Level Approaches
<ol>
  <li> Use old sync (v1.1)
  <li> Build a new system on existing tech
  <li> Build a new system on custom tech
  <li> Use a 3rd party
</ol>
</section>

<section class="slide">
## Making a Decision
# Sept 2nd, prototype battle
</section>

<section class="slide">
## A Typical User
<ul>
<li> Has 472 history entries
<li> 546 bookmarks
<li> 469 passwords
</ul>
<br><br>
https://id.etherpad.mozilla.org/picl-user-model
</section>

<section class="slide">
## A new system on existing tech
</section>

<section class="slide">
## Prototypes
Vlad and Dale
</section>

<section class="slide">
## Data Representation
<pre>
{
    "v": 1, "guid": "abcdefghijkl",
    "hash": "abcdefghijklabcdefghijkl",
    "iv": "aeaeaeaeaeae", "hmac": "bcbcbcbcbcbcbcbc",
    "contents": {  // Shown as cleartext.
     "usernameField": "f_us",
     "passwordField": "f_p",
     "httpRealm": "",
     "hostname": "foo.com",
     "formSubmitURL": "http://...",
     "timeCreated": 1374647169487,
     "timeLastUsed": 1374647449487,
     "timePasswordChanged": 1374647449487,
     "timesUsed": 3
    }
}
</pre>
</section>

<section class="slide">
## Path Forward
<ul>
  <li> Speak up about MVP, now.
  <li> Prototypes ready by Sept 2nd
  <li> Finish Auth by Q3
  <li> Tauni is the focal point of communcaiton
</ul>
</section>

<! -- END -->

<!-- Required JS files. -->
<script src="jquery-1.7.2.min.js"></script>
<script src="core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="extensions/hash/deck.hash.js"></script>
<script src="extensions/scale/deck.scale.js"></script>
<script src="extensions/markdown/Markdown.Converter.js"></script>
<script src="extensions/markdown/deck.markdown.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>
	$(function() {
    $.extend(true, $.deck.defaults, {
      hashPrefix: '',
    });
		$.deck('.slide');
	});
</script>
</body>
</html>
